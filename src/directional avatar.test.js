import {
	start,
	press,
	end,
	startRecording,
	stopRecording,
} from './test/bitsy';

const gamedata = `

# BITSY VERSION 8.0
# DEVELOPMENT BUILD -- BETA
! ROOM_FORMAT 0
! PAL_FORMAT 1

PAL 1
0052CC
809FFF
FFFFFF

ROOM 1
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000A00000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
PAL 1

AVA A
00011000
00011000
00011000
00111100
01111110
10111101
00100100
00100100
BTN 1

SPR AVA_UP
00000000
00010000
00111000
00010000
00010000
00010000
00000000
00000000

SPR AVA_DWN
00000000
00000000
00010000
00010000
00010000
00111000
00010000
00000000

SPR AVA_LFT
00000000
00000000
00100000
01111100
00100000
00000000
00000000
00000000

SPR AVA_RGT
00000000
00000000
00000100
00111110
00000100
00000000
00000000
00000000

CUE 1
{FN {BTN}
	{IF
		{IS BTN "OK"}
			{>> }
		{: THIS TIL {ADD "AVA_" BTN}}
	}
}

`;

test('directional avatar', async () => {
	await start({
		gamedata,
	});
	await startRecording();
	await press('ArrowLeft');
	await press('ArrowRight');
	await press('ArrowUp');
	await press('ArrowDown');
	await stopRecording();
	await end();
});
