import {
	end,
	press,
	snapshot,
	start,
	walkToCat,
} from './test/bitsy';

test('deferred', async () => {
	await start({
		gamedata: `

# BITSY VERSION 8.0
# DEVELOPMENT BUILD -- BETA
! ROOM_FORMAT 0
! PAL_FORMAT 1

PAL 1
0052CC
809FFF
FFFFFF

ROOM 1
0000000000000000
0111111111111110
0100000000000010
0100000000000010
0100A00000000010
0100000000000010
0100000000000010
0100000000000010
0100000000000010
0100000000000010
0100000000000010
0100000000000010
0100000020000010
0100000000000010
0111111111111110
0000000000000000
PAL 1

TIL 1
11111111
10000001
10000001
10011001
10011001
10000001
10000001
11111111

SPR 2
00000000
00000000
01010001
01110001
01110010
01111100
00111100
00100100
DLG 1

AVA A
00011000
00011000
00011000
00111100
01111110
10111101
00100100
00100100

DLG 1
I'm a cat{jump "2"}

DLG 2
You found a nice warm cup of tea
`,
		hacks: ['dialog jump'],
	});
	await walkToCat();
	await press('ArrowRight');
	await press('Enter');
	await snapshot();
	await press('Enter');
	await press('Enter');
	await snapshot();
	await end();
});

test('now', async () => {
	await start({
		gamedata: `

# BITSY VERSION 8.0
# DEVELOPMENT BUILD -- BETA
! ROOM_FORMAT 0
! PAL_FORMAT 1

PAL 1
0052CC
809FFF
FFFFFF

ROOM 1
0000000000000000
0111111111111110
0100000000000010
0100000000000010
0100A00000000010
0100000000000010
0100000000000010
0100000000000010
0100000000000010
0100000000000010
0100000000000010
0100000000000010
0100000020000010
0100000000000010
0111111111111110
0000000000000000
PAL 1

TIL 1
11111111
10000001
10000001
10011001
10011001
10000001
10000001
11111111

SPR 2
00000000
00000000
01010001
01110001
01110010
01111100
00111100
00100100
DLG 1

AVA A
00011000
00011000
00011000
00111100
01111110
10111101
00100100
00100100

DLG 1
I'm a cat{jumpNow "2"}

DLG 2
You found a nice warm cup of tea
`,
		hacks: ['dialog jump'],
	});
	await walkToCat();
	await press('ArrowRight');
	await press('Enter');
	await press('Enter');
	await snapshot();
	await end();
});
